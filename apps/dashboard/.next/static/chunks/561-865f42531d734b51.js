"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[561],{44587:(e,s,a)=>{a.d(s,{A:()=>m});var t=a(54568);a(7620);var r=a(4986),l=a(82055),n=a(99924),d=a(3991),i=a(21318),c=a(35551),o=a(24508);let x=[{name:"Dashboard",icon:r.A,href:"/dashboard"},{name:"Leads",icon:l.A,href:"/dashboard/leads"},{name:"Accounts",icon:n.A,href:"/dashboard/accounts"},{name:"Calendar",icon:d.A,href:"/dashboard/calendar"},{name:"Calls",icon:i.A,href:"/dashboard/calls"},{name:"Analytics",icon:c.A,href:"/dashboard/analytics"},{name:"Settings",icon:o.A,href:"/dashboard/settings"}];function m(e){let{title:s,children:a}=e;return(0,t.jsxs)("div",{className:"min-h-screen bg-surface text-slate-900 flex",children:[(0,t.jsxs)("aside",{className:"hidden md:flex md:flex-col w-60 border-r border-gray-200 bg-white",children:[(0,t.jsx)("div",{className:"h-14 px-4 flex items-center border-b border-gray-200",children:(0,t.jsx)("span",{className:"text-lg font-semibold",children:"HelioLeads"})}),(0,t.jsx)("nav",{className:"p-2 space-y-1",children:x.map(e=>(0,t.jsxs)("a",{href:e.href||"#",className:"flex items-center gap-3 px-3 py-2 rounded-md text-sm text-gray-700 hover:bg-gray-100",children:[(0,t.jsx)(e.icon,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{children:e.name})]},e.name))}),(0,t.jsx)("div",{className:"mt-auto p-3 text-xs text-gray-500",children:"v0.1.0"})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col",children:[(0,t.jsxs)("header",{className:"h-14 bg-white/90 backdrop-blur border-b border-gray-200 flex items-center",children:[(0,t.jsxs)("div",{className:"flex-1 px-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Home"}),(0,t.jsx)("div",{className:"text-gray-300",children:"/"}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:s})]}),(0,t.jsxs)("div",{className:"px-4 flex items-center gap-3",children:[(0,t.jsx)("input",{className:"hidden sm:block h-8 w-56 px-3 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500/60",placeholder:"Search..."}),(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-orange-500 to-yellow-400"})]})]}),(0,t.jsx)("main",{className:"p-4 lg:p-6",children:a})]})]})}},46439:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(54568);function r(e){let{children:s,tone:a="gray"}=e;return(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ".concat({green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",amber:"bg-amber-100 text-amber-800",gray:"bg-gray-100 text-gray-800"}[a]),children:s})}a(7620)},59561:(e,s,a)=>{a.d(s,{A:()=>E});var t=a(54568),r=a(7620),l=a(89223),n=a(21318),d=a(83052),i=a(3991),c=a(3367),o=a(65440),x=a(39513),m=a(66734),h=a(82568),g=a(83872),u=a(30149),j=a(38573),p=a(34503),b=a(17296),y=a(45155),N=a(71402),f=a(57617),v=a(76451),w=a(33033),A=a(132),k=a(58138),S=a(35493),C=a(46439);function I(e){let{className:s=""}=e;return(0,t.jsx)("div",{className:"animate-pulse rounded bg-gray-200 ".concat(s)})}var D=a(44587);function E(){var e,s,a,E,T,L;let{data:P}=(0,l.useSession)(),[K,W]=(0,r.useState)("overview"),[R,F]=(0,r.useState)(null),[J,O]=(0,r.useState)(""),{callData:Q,conversionData:_,recentCalls:H,loadingLeads:U,leadError:V}=function(){let[e,s]=(0,r.useState)([]),[a,t]=(0,r.useState)([]),[l,n]=(0,r.useState)([]),[d,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=!1;return async function(){try{var a,r,l;i(!0);let d=await fetch("/api/leads",{cache:"no-store"});if(!d.ok)throw Error("Failed to load leads: ".concat(d.status));let c=await d.json();if(e)return;s(null!=(a=c.callData)?a:[]),t(null!=(r=c.conversionData)?r:[]),n(null!=(l=c.recentCalls)?l:[])}catch(s){e||o((null==s?void 0:s.message)||"Error loading leads")}finally{e||i(!1)}}(),()=>{e=!0}},[]),{callData:e,conversionData:a,recentCalls:l,loadingLeads:d,leadError:c}}();(0,r.useEffect)(()=>{let e=async()=>{try{let s=await fetch("/api/protected");if(s.ok){var e;let a=await s.json();F(a),(null==(e=a.tokenInfo)?void 0:e.expires)&&O(new Date(a.tokenInfo.expires).toLocaleString())}}catch(e){console.error("Error fetching token info:",e)}};P&&e()},[P]);let q=[{title:"Total Calls Today",value:"67",change:"+12%",icon:n.A,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified Leads",value:"29",change:"+18%",icon:d.A,color:"text-green-600",bgColor:"bg-green-100"},{title:"Appointments Set",value:"18",change:"+25%",icon:i.A,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Revenue Pipeline",value:"$142K",change:"+32%",icon:c.A,color:"text-purple-600",bgColor:"bg-purple-100"}];return(0,t.jsxs)(D.A,{title:"Dashboard",children:[!1,!1,(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===K&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:q.map((e,s)=>(0,t.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-card border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.value}),(0,t.jsx)("p",{className:"text-sm text-green-600 mt-1",children:e.change})]}),(0,t.jsx)("div",{className:"p-3 rounded-lg bg-brand-50",children:(0,t.jsx)(e.icon,{className:"w-6 h-6 text-brand-600"})})]})},s))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-card border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weekly Call Activity"}),U?(0,t.jsx)(I,{className:"h-72"}):(0,t.jsx)(u.u,{width:"100%",height:300,children:(0,t.jsxs)(j.b,{data:Q,children:[(0,t.jsx)(p.d,{strokeDasharray:"3 3"}),(0,t.jsx)(b.W,{dataKey:"name"}),(0,t.jsx)(y.h,{}),(0,t.jsx)(N.m,{}),(0,t.jsx)(f.N,{type:"monotone",dataKey:"calls",stroke:"#f97316",strokeWidth:2}),(0,t.jsx)(f.N,{type:"monotone",dataKey:"qualified",stroke:"#eab308",strokeWidth:2}),(0,t.jsx)(f.N,{type:"monotone",dataKey:"appointments",stroke:"#22c55e",strokeWidth:2})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-card border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Lead Conversion Funnel"}),U?(0,t.jsx)(I,{className:"h-72"}):(0,t.jsx)(u.u,{width:"100%",height:300,children:(0,t.jsxs)(v.r,{children:[(0,t.jsx)(w.F,{data:_,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:e=>{let{name:s,value:a}=e;return"".concat(s,": ").concat(a,"%")},children:_.map((e,s)=>(0,t.jsx)(A.f,{fill:e.color},s))}),(0,t.jsx)(N.m,{})]})})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-card border border-gray-100",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Calls"})}),U&&(0,t.jsx)("div",{className:"p-6 text-gray-500",children:"Loading recent calls..."}),V&&(0,t.jsx)("div",{className:"p-6 text-red-600",children:V}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AI Score"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.company}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.duration}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["Qualified"===e.status&&(0,t.jsx)(C.A,{tone:"green",children:"Qualified"}),"Appointment"===e.status&&(0,t.jsx)(C.A,{tone:"blue",children:"Appointment"}),"Follow-up"===e.status&&(0,t.jsx)(C.A,{tone:"amber",children:"Follow-up"})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("span",{className:"mr-2",children:[e.score,"%"]}),(0,t.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"".concat(e.score,"%")}})})]})})]},e.id))})]})})]})]}),"calls"===K&&(0,t.jsx)("div",{className:"space-y-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-card border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Call Volume Analysis"}),U?(0,t.jsx)(I,{className:"h-96"}):(0,t.jsx)(u.u,{width:"100%",height:400,children:(0,t.jsxs)(k.E,{data:Q,children:[(0,t.jsx)(p.d,{strokeDasharray:"3 3"}),(0,t.jsx)(b.W,{dataKey:"name"}),(0,t.jsx)(y.h,{}),(0,t.jsx)(N.m,{}),(0,t.jsx)(S.y,{dataKey:"calls",fill:"#f97316"})]})})]})}),"performance"===K&&(0,t.jsx)("div",{className:"space-y-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200 text-center",children:[(0,t.jsx)(o.A,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Avg Call Quality"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-orange-600",children:"87%"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200 text-center",children:[(0,t.jsx)(x.A,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Avg Call Duration"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:"11:42"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200 text-center",children:[(0,t.jsx)(m.A,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Conversion Rate"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-green-600",children:"32%"})]})]})}),"security"===K&&(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)(h.A,{className:"w-6 h-6 text-orange-500 mr-3"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"JWT Token Information"})]}),R?(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"User Information"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"User ID:"}),(0,t.jsx)("span",{className:"font-mono text-gray-900",children:null==(e=R.user)?void 0:e.id})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,t.jsx)("span",{className:"text-gray-900",children:null==(s=R.user)?void 0:s.email})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Role:"}),(0,t.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs font-medium",children:null==(a=R.user)?void 0:a.role})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Company:"}),(0,t.jsx)("span",{className:"text-gray-900",children:null==(E=R.user)?void 0:E.company})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Token Details"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Issued:"}),(0,t.jsx)("span",{className:"text-gray-900",children:(null==(T=R.tokenInfo)?void 0:T.issued)?new Date(R.tokenInfo.issued).toLocaleString():"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Expires:"}),(0,t.jsx)("span",{className:"text-gray-900",children:(null==(L=R.tokenInfo)?void 0:L.expires)?new Date(R.tokenInfo.expires).toLocaleString():"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-medium",children:"Valid"})]})]})]})]}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading token information..."})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200 text-center",children:[(0,t.jsx)(g.A,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"JWT Authentication"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Secure token-based authentication with 24-hour expiry"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200 text-center",children:[(0,t.jsx)(h.A,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Session Management"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Automatic token refresh and secure session handling"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200 text-center",children:[(0,t.jsx)(o.A,{className:"w-12 h-12 text-purple-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Access Control"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Role-based permissions and protected API routes"})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Protected API Test"}),(0,t.jsx)("button",{onClick:async()=>{try{let e=await fetch("/api/protected",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test:"data",timestamp:new Date().toISOString()})}),s=await e.json();alert("API Response: ".concat(JSON.stringify(s,null,2)))}catch(e){alert("API Error: "+e)}},className:"bg-gradient-to-r from-orange-500 to-yellow-500 text-white px-6 py-2 rounded-lg hover:from-orange-600 hover:to-yellow-600 transition-all duration-200",children:"Test Protected API"})]})]})]})]})}}}]);